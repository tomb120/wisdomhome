__d(function(e,t,a,n,o){'use strict';Object.defineProperty(n,"__esModule",{value:!0});var l=t(o[0]),r=babelHelpers.interopRequireDefault(l),i=t(o[1]),s=t(o[2]),u=babelHelpers.interopRequireDefault(s),d=['TouchableHighlight','TouchableOpacity','TouchableWithoutFeedback','TouchableNativeFeedback'],c=(function(e){function t(e){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return h.call(a),a._button=null,a._buttonFrame=null,a._nextValue=null,a._nextIndex=null,a.state={accessible:!!e.accessible,loading:!e.options,showDropdown:!1,buttonText:e.defaultValue,selectedIndex:e.defaultIndex},a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.buttonText,n=t.selectedIndex,o=e.defaultIndex,l=e.defaultValue,r=e.options;a=null==this._nextValue?a:this._nextValue,(n=null==this._nextIndex?n:this._nextIndex)<0&&(n=o)<0&&(a=l),this._nextValue=null,this._nextIndex=null,this.setState({loading:!r,buttonText:a,selectedIndex:n})}},{key:"render",value:function(){return r.default.createElement(i.View,this.props,this._renderButton(),this._renderModal())}},{key:"_updatePosition",value:function(e){var t=this;this._button&&this._button.measure&&this._button.measure(function(a,n,o,l,r,i){t._buttonFrame={x:r,y:i,w:o,h:l},e&&e()})}},{key:"show",value:function(){var e=this;this._updatePosition(function(){e.setState({showDropdown:!0})})}},{key:"hide",value:function(){this.setState({showDropdown:!1})}},{key:"select",value:function(e){var t=this.props,a=t.defaultValue,n=t.options,o=t.defaultIndex,l=t.renderButtonText,r=a;(null==e||!n||e>=n.length)&&(e=o),e>=0&&(r=l?l(n[e]):n[e].toString()),this._nextValue=r,this._nextIndex=e,this.setState({buttonText:r,selectedIndex:e})}},{key:"_renderButton",value:function(){var e=this,t=this.props,a=t.disabled,n=t.accessible,o=t.children,l=t.textStyle,s=this.state.buttonText;return r.default.createElement(i.TouchableOpacity,{ref:function(t){return e._button=t},disabled:a,accessible:n,onPress:this._onButtonPress},o||r.default.createElement(i.View,{style:f.button},r.default.createElement(i.Text,{style:[f.buttonText,l],numberOfLines:1},s),r.default.createElement(i.Image,{style:{width:30,height:30},source:{uri:'icon_101'}})))}},{key:"_renderModal",value:function(){var e=this.props,t=e.animated,a=e.accessible,n=e.dropdownStyle,o=this.state,l=o.showDropdown,s=o.loading;if(l&&this._buttonFrame){var u=this._calcPosition(),d=t?'fade':'none';return r.default.createElement(i.Modal,{animationType:d,visible:!0,transparent:!0,onRequestClose:this._onRequestClose,supportedOrientations:['portrait','portrait-upside-down','landscape','landscape-left','landscape-right']},r.default.createElement(i.TouchableWithoutFeedback,{accessible:a,disabled:!l,onPress:this._onModalPress},r.default.createElement(i.View,{style:f.modal},r.default.createElement(i.View,{style:[f.dropdown,n,u]},s?this._renderLoading():this._renderDropdown()))))}}},{key:"_calcPosition",value:function(){var e=this.props,t=e.dropdownStyle,a=e.style,n=e.adjustFrame,o=i.Dimensions.get('window'),l=o.width,r=o.height,s=t&&i.StyleSheet.flatten(t).height||i.StyleSheet.flatten(f.dropdown).height,u=r-this._buttonFrame.y-this._buttonFrame.h,d=l-this._buttonFrame.x,c=u>=s||u>=this._buttonFrame.y,h=d>=this._buttonFrame.x,p={height:s,top:c?this._buttonFrame.y+this._buttonFrame.h:Math.max(0,this._buttonFrame.y-s)};if(h)p.left=this._buttonFrame.x;else{var b=t&&i.StyleSheet.flatten(t).width||a&&i.StyleSheet.flatten(a).width||-1;-1!==b&&(p.width=b),p.right=d-this._buttonFrame.w}return n?n(p):p}},{key:"_renderLoading",value:function(){return r.default.createElement(i.ActivityIndicator,{size:"small"})}},{key:"_renderDropdown",value:function(){var e=this.props,t=e.scrollEnabled,a=e.renderSeparator,n=e.showsVerticalScrollIndicator,o=e.keyboardShouldPersistTaps;return r.default.createElement(i.ListView,{scrollEnabled:t,style:f.list,dataSource:this._dataSource,renderRow:this._renderRow,renderSeparator:a||this._renderSeparator,automaticallyAdjustContentInsets:!1,showsVerticalScrollIndicator:n,keyboardShouldPersistTaps:o})}},{key:"_onRowPress",value:function(e,t,a,n){var o=this.props,l=o.onSelect,r=o.renderButtonText,i=o.onDropdownWillHide;if(!l||!1!==l(a,e)){n(t,a);var s=r&&r(e)||e.toString();this._nextValue=s,this._nextIndex=a,this.setState({buttonText:s,selectedIndex:a})}i&&!1===i()||this.setState({showDropdown:!1})}},{key:"_dataSource",get:function(){var e=this.props.options;return new i.ListView.DataSource({rowHasChanged:function(e,t){return e!==t}}).cloneWithRows(e)}}]),t})(l.Component);c.propTypes={disabled:u.default.bool,scrollEnabled:u.default.bool,defaultIndex:u.default.number,defaultValue:u.default.string,options:u.default.array,accessible:u.default.bool,animated:u.default.bool,showsVerticalScrollIndicator:u.default.bool,keyboardShouldPersistTaps:u.default.string,style:u.default.oneOfType([u.default.number,u.default.object,u.default.array]),textStyle:u.default.oneOfType([u.default.number,u.default.object,u.default.array]),dropdownStyle:u.default.oneOfType([u.default.number,u.default.object,u.default.array]),dropdownTextStyle:u.default.oneOfType([u.default.number,u.default.object,u.default.array]),dropdownTextHighlightStyle:u.default.oneOfType([u.default.number,u.default.object,u.default.array]),adjustFrame:u.default.func,renderRow:u.default.func,renderSeparator:u.default.func,renderButtonText:u.default.func,onDropdownWillShow:u.default.func,onDropdownWillHide:u.default.func,onSelect:u.default.func},c.defaultProps={disabled:!1,scrollEnabled:!0,defaultIndex:-1,defaultValue:'Please select...',options:null,animated:!0,showsVerticalScrollIndicator:!0,keyboardShouldPersistTaps:'never'};var h=function(){var e=this;this._onButtonPress=function(){var t=e.props.onDropdownWillShow;t&&!1===t()||e.show()},this._onRequestClose=function(){var t=e.props.onDropdownWillHide;t&&!1===t()||e.hide()},this._onModalPress=function(){var t=e.props.onDropdownWillHide;t&&!1===t()||e.hide()},this._renderRow=function(t,a,n,o){var l=e.props,s=l.renderRow,u=l.dropdownTextStyle,c=l.dropdownTextHighlightStyle,h=l.accessible,p=e.state.selectedIndex,b="row_"+n,y=n==p,w=s?s(t,n,y):r.default.createElement(i.Text,{style:[f.rowText,u,y&&f.highlightedRowText,y&&c]},t),_={key:b,accessible:h,onPress:function(){return e._onRowPress(t,a,n,o)}};if(d.find(function(e){return e==w.type.displayName})){var x=babelHelpers.extends({},w.props);x.key=_.key,x.onPress=_.onPress;var m=w.props.children;switch(w.type.displayName){case'TouchableHighlight':return r.default.createElement(i.TouchableHighlight,x,m);case'TouchableOpacity':return r.default.createElement(i.TouchableOpacity,x,m);case'TouchableWithoutFeedback':return r.default.createElement(i.TouchableWithoutFeedback,x,m);case'TouchableNativeFeedback':return r.default.createElement(i.TouchableNativeFeedback,x,m)}}return r.default.createElement(i.TouchableHighlight,_,w)},this._renderSeparator=function(e,t,a){var n="spr_"+t;return r.default.createElement(i.View,{style:f.separator,key:n})}};n.default=c;var f=i.StyleSheet.create({button:{flexDirection:'row',justifyContent:'center',alignItems:'center'},buttonText:{fontSize:12},modal:{flexGrow:1},dropdown:{position:'absolute',height:5*(33+i.StyleSheet.hairlineWidth),borderWidth:i.StyleSheet.hairlineWidth,borderColor:'lightgray',borderRadius:2,backgroundColor:'white',justifyContent:'center'},loading:{alignSelf:'center'},list:{},rowText:{paddingHorizontal:6,paddingVertical:10,fontSize:11,color:'gray',backgroundColor:'white',textAlignVertical:'center'},highlightedRowText:{color:'black'},separator:{height:i.StyleSheet.hairlineWidth,backgroundColor:'lightgray'}})},19,[13,20,111]);