__d(function(e,t,l,i,n){Object.defineProperty(i,"__esModule",{value:!0});var s=t(n[0]),r=babelHelpers.interopRequireDefault(s),a=t(n[1]),u=babelHelpers.interopRequireDefault(a),c=t(n[2]),o=babelHelpers.interopRequireDefault(c),f=t(n[3]),p=babelHelpers.interopRequireDefault(f);function d(e){return h(r.default.encode(e))}function h(e){return e.replace(/\//g,'_').replace(/\+/g,'-')}function b(e,t){return u.default.HmacSHA1(e,t).toString(u.default.enc.Base64)}var y=(function(){function e(t){if(babelHelpers.classCallCheck(this,e),'object'!=typeof t)return!1;this.scope=t.scope||null,this.expires=t.expires||3600,this.insertOnly=t.insertOnly||null,this.saveKey=t.saveKey||null,this.endUser=t.endUser||null,this.returnUrl=t.returnUrl||null,this.returnBody=t.returnBody||null,this.callbackUrl=t.callbackUrl||null,this.callbackHost=t.callbackHost||null,this.callbackBody=t.callbackBody||null,this.callbackBodyType=t.callbackBodyType||null,this.persistentOps=t.persistentOps||null,this.persistentNotifyUrl=t.persistentNotifyUrl||null,this.persistentPipeline=t.persistentPipeline||null,this.fsizeLimit=t.fsizeLimit||null,this.fsizeMin=t.fsizeMin||null,this.detectMime=t.detectMime||null,this.mimeLimit=t.mimeLimit||null}return babelHelpers.createClass(e,[{key:"token",value:function(){var e=this.getFlags(),t=d(JSON.stringify(e)),l=h(b(t,o.default.SECRET_KEY));return o.default.ACCESS_KEY+':'+l+':'+t}},{key:"getFlags",value:function(){for(var e={},t=['scope','insertOnly','saveKey','endUser','returnUrl','returnBody','callbackUrl','callbackHost','callbackBody','callbackBodyType','callbackFetchKey','persistentOps','persistentNotifyUrl','persistentPipeline','fsizeLimit','fsizeMin','detectMime','mimeLimit'],l=t.length-1;l>=0;l--)null!==this[t[l]]&&(e[t[l]]=this[t[l]]);return e.deadline=this.expires+Math.floor(Date.now()/1e3),e}}]),e})(),k=(function(){function e(t){babelHelpers.classCallCheck(this,e),this.expires=t||3600}return babelHelpers.createClass(e,[{key:"makeRequest",value:function(e){var t=this.expires+Math.floor(Date.now()/1e3);e.indexOf('?')>=0?e+='&e=':e+='?e=';var l=h(b(e+=t,o.default.SECRET_KEY));return e+'&token='+(o.default.ACCESS_KEY+':'+l)}}]),e})();i.default={urlsafeBase64Encode:d,generateAccessToken:function(e,t){var l=(0,p.default)(e,!0).pathname+'\n';t&&(l+=t);var i=h(b(l,o.default.SECRET_KEY));return'QBox '+o.default.ACCESS_KEY+':'+i},PutPolicy2:y,GetPolicy:k}},587,[588,589,586,623]);