__d(function(e,t,n,a,i){Object.defineProperty(a,"__esModule",{value:!0});var r=t(i[0]),l=babelHelpers.interopRequireDefault(r),o=t(i[1]),s=t(i[2]),d=babelHelpers.interopRequireDefault(s),u=t(i[3]),c=babelHelpers.interopRequireDefault(u),f=t(i[4]),m=babelHelpers.interopRequireWildcard(f),h=t(i[5]),p=babelHelpers.interopRequireDefault(h),y=t(i[6]),g=babelHelpers.interopRequireDefault(y),b=t(i[7]),w=babelHelpers.interopRequireDefault(b),S=t(i[8]),x=babelHelpers.interopRequireDefault(S),E=t(i[9]),T=t(i[10]),k=babelHelpers.interopRequireDefault(T),C=t(i[11]),D=babelHelpers.interopRequireDefault(C),v=t(i[12]),I=t(i[13]),j=babelHelpers.interopRequireDefault(I),F=[],B=o.Dimensions.get('window'),V=B.width,L=B.height,R=o.NativeModules.EventEmitterManager,O=new o.NativeEventEmitter(R),P=new o.ListView.DataSource({rowHasChanged:function(e,t){return e!=t}}),H=null,W=(H=[{type:1}],(function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dataSource:P.cloneWithRows(F),datetime1:(0,g.default)().format("YYYY-MM-DD 00:00"),datetime2:(0,g.default)().format('YYYY-MM-DD ')+'23:59',visible:!1,visible1:!1,builtSiteAddress:'',workFee:0,workerlist:[],reason:'',projectid:''},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillUnmount",value:function(){this.listener.remove()}},{key:"componentDidMount",value:function(){var e=this;o.AsyncStorage.getItem('logininfo',function(t,n){H=JSON.parse(n),e.findUserWorkOrderListByType()}),this.listener=d.default.addListener('noticedata',function(e){}),this.remoteNoti=O.addListener('RemoteNoti',function(t){return e.androidComeFrom(t)})}},{key:"androidComeFrom",value:function(e){console.log(e)}},{key:"showdialog",value:function(e){this.setState({visible1:!0,projectid:e})}},{key:"cancelUserWorkOrder",value:function(){var e=this,t=new FormData;t.append('cancelUserIdFk',H.userId),t.append('workOrderId',this.state.projectid.workOrderId),t.append('cancelContent',this.state.reason);var n=m.baseurl+"/buildProject/cancelUserWorkOrder";return E.EasyLoading.show('\u6b63\u5728\u63d0\u4ea4...',3e3),fetch(n,{method:"POST",headers:{ContentType:'application/x-www-form-urlencoded'},body:t}).then(function(e){return e.json()}).then(function(t){E.EasyLoading.dismis(),e.setState({status:t.resultFlag,msg:t.msg},function(){this.refs.toast.show(this.state.msg,1e3),1==this.state.status&&this.setState({visible1:!0})})}).catch(function(e){E.EasyLoading.dismis(),console.log(e.message)})}},{key:"cancelBuildProjectInfo",value:function(e){var t=this,n=new FormData;n.append('builtProjectId',e.builtProjectId);var a=m.baseurl+"/buildProject/cancelBuildProjectInfo";return E.EasyLoading.show('\u6b63\u5728\u63d0\u4ea4...',3e3),fetch(a,{method:"POST",headers:{ContentType:'application/x-www-form-urlencoded'},body:n}).then(function(e){return e.json()}).then(function(e){E.EasyLoading.dismis(),t.setState({status:e.resultFlag,msg:e.msg},function(){this.refs.toast.show(this.state.msg,1e3),this.state.status})}).catch(function(e){E.EasyLoading.dismis(),console.log(e.message)})}},{key:"fetchfilterData",value:function(e,t,n,a){var i=this,r=m.baseurl+"";return fetch(r,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){i.setState({status:e.status,msg:e.msg},function(){this.refs.toast.show(this.state.msg),1==this.state.status&&null!==F&&'undefined'!==F&&(F.splice(n,1),this.setState({dataSource:P.cloneWithRows(F)}),parseInt(n)!==H.length&&a[""+t+n].closeRow())})}).catch(function(e){console.log(e.message)})}},{key:"findBuildProjectById",value:function(e){var t=this,n='';return n=2===H.type?m.baseurl+"/buildProject/findBuildProjectById?builtProjectId="+e:m.baseurl+"/buildProject/findUserWorkOrderById?workOrderId="+e,fetch(n,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){t.setState({status:e.resultFlag,msg:e.msg},function(){if(1==this.state.status)try{var t=e.data;if(2===H.type){var n=t.buildProjectInfoTable,a=t.userWorkOrderInfoTableList;null!==n&&void 0!==n&&'[]'!==e.data&&(this.setState({builtSiteAddress:n.builtSiteAddress}),this.setState({visible:!0})),null!==a&&void 0!==a&&'[]'!==e.data&&this.setState({workerlist:a})}else{var i=t.userWorkOrderInfoTable;null!==i&&void 0!==i&&'[]'!==e.data&&(this.setState({workFee:i.workFee}),this.setState({visible:!0}))}}catch(e){}})}).catch(function(e){console.log(e.message)})}},{key:"findUserWorkOrderListByType",value:function(){var e=this,t='';return t=1===H.type?m.baseurl+"/buildProject/findUserWorkOrderListByType?userIdFk="+H.userId+"&queryType=3&startDateTime="+this.state.datetime1+'&endDateTime='+this.state.datetime2:m.baseurl+"/buildProject/findBuildProjectList?userIdFk="+H.userId+"&queryType=3&startDateTime="+this.state.datetime1+'&endDateTime='+this.state.datetime2,fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({status:t.resultFlag,msg:t.msg},function(){if(1==this.state.status){var e=t.data,n=[];null!==(n=1===H.type?e.userWorkOrderInfoTableList:e.buildProjectInfoTableList)&&void 0!==n&&'[]'!==t.data&&this.setState({dataSource:P.cloneWithRows(n)})}})}).catch(function(e){console.log(e.message)})}},{key:"render",value:function(){var e=this;return l.default.createElement(o.View,{style:Y.container},l.default.createElement(D.default,{visible:this.state.visible,onTouchOutside:function(){e.setState({visible:!1})}},l.default.createElement(C.DialogTitle,{titleStyle:{backgroundColor:w.default.main,height:40},titleTextStyle:{fontSize:16},title:"\u8be6\u60c5"}),l.default.createElement(C.DialogContent,null,l.default.createElement(o.View,{style:Y.containerlist},l.default.createElement(o.View,{style:Y.roleContainer},l.default.createElement(o.Text,{style:{color:w.default.subtitle,fontSize:17}},1===H.type?'\u8d39\u7528':'\u8be6\u7ec6\u5730\u5740:'),l.default.createElement(o.Text,{style:{color:w.default.subtitle,fontSize:17}},1===H.type?this.state.workFee:this.state.builtSiteAddress)),2===H.type?l.default.createElement(v.FlatList,{data:this.state.workerlist,extradata:this.state,renderItem:function(e){var t=e.item;e.index;return l.default.createElement(o.View,{style:Y.itemStyleall},l.default.createElement(o.View,{style:{flexDirection:'row',width:V,justifyContent:'space-between',padding:5}},l.default.createElement(o.Text,{style:Y.name},"\u63a5\u5355\u4eba\u5458:",t.name),l.default.createElement(o.Text,{style:Y.name},"\u5de5\u79cd\uff1a",t.typeName)),l.default.createElement(o.View,{style:{flexDirection:'row',width:V,justifyContent:'space-between',padding:5}},l.default.createElement(o.Text,{style:Y.name},"\u8d39\u7528:",t.workFee),l.default.createElement(o.Text,{style:Y.name},t.builtSiteAddress)))}}):null))),l.default.createElement(D.default,{visible:this.state.visible1,onTouchOutside:function(){e.setState({visible1:!1})}},l.default.createElement(C.DialogTitle,{titleStyle:{backgroundColor:w.default.main,height:40},titleTextStyle:{fontSize:16},title:"\u64a4\u6d88"}),l.default.createElement(C.DialogContent,null,l.default.createElement(o.View,{style:Y.containerlist},1===H.type?l.default.createElement(o.View,{style:Y.inputView},l.default.createElement(o.Text,{style:Y.text},"\u64a4\u6d88\u539f\u56e0"),l.default.createElement(o.TextInput,{style:Y.textinput,maxLength:50,multiline:!0,clearButtonMode:"while-editing",returnKeyType:"done",underlineColorAndroid:"transparent",placeholderTextColor:w.default.subtitle,placeholder:"\u8bf7\u8f93\u5165\u539f\u56e0",onChangeText:function(t){e.state.reason=t}}),l.default.createElement(x.default,{underlayColor:"#00000000",underlayTxtColor:"#FFFFFF",txtStyle:{color:'#FFFFFF',fontSize:18,textAlign:'center'},style:{height:40,width:V-80,padding:0,backgroundColor:'pink',borderRadius:4,marginTop:50},onPress:function(){return e.cancelUserWorkOrder()}},"\u786e\u5b9a\u64a4\u6d88")):null))),l.default.createElement(o.View,{style:Y.containerbox},l.default.createElement(o.View,{style:Y.roleContainer},l.default.createElement(o.View,{style:Y.containerrender},l.default.createElement(o.Text,{style:Y.name},"\u5f00\u59cb\u65f6\u95f4"),l.default.createElement(o.View,{style:{flexDirection:'row',alignItems:'center'}},l.default.createElement(k.default,{style:{width:150},date:this.state.datetime1,mode:"datetime",format:"YYYY-MM-DD HH:mm",placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",confirmBtnText:"\u786e\u5b9a",cancelBtnText:"\u53d6\u6d88",customStyles:{dateIcon:{position:'absolute',left:0,top:4,marginLeft:0},dateInput:{marginLeft:36}},minuteInterval:10,onDateChange:function(t){e.setState({datetime1:t})}}))),l.default.createElement(o.View,{style:Y.containerrender},l.default.createElement(o.Text,{style:Y.name},"\u7ed3\u675f\u65f6\u95f4"),l.default.createElement(o.View,{style:{flexDirection:'row',alignItems:'center'}},l.default.createElement(k.default,{style:{width:150},date:this.state.datetime2,mode:"datetime",format:"YYYY-MM-DD HH:mm",placeholder:"\u8bf7\u9009\u62e9\u65f6\u95f4",confirmBtnText:"\u786e\u5b9a",cancelBtnText:"\u53d6\u6d88",customStyles:{dateIcon:{position:'absolute',left:0,top:4,marginLeft:0},dateInput:{marginLeft:36}},minuteInterval:10,onDateChange:function(t){e.setState({datetime2:t})}}))))),l.default.createElement(c.default,{dataSource:this.state.dataSource,renderHiddenRow:function(t,n,a,i){return l.default.createElement(o.View,{style:Y.rowBack},l.default.createElement(o.View,{style:Y.leftView},l.default.createElement(o.Text,{style:{backgroundColor:'red'}},"Right")),l.default.createElement(o.TouchableOpacity,{onPress:function(){return 1===H.type?e.showdialog(t):e.cancelBuildProjectInfo(t)}},l.default.createElement(o.View,{style:Y.leftView},l.default.createElement(o.Text,{style:{color:'white',fontSize:17}},"\u64a4\u6d88"))))},leftOpenValue:75,rightOpenValue:-75,renderRow:this.renderRow.bind(this),disableLeftSwipe:!0,disableRightSwipe:!0}),l.default.createElement(x.default,{underlayColor:"#00000000",underlayTxtColor:"#FFFFFF",txtStyle:{color:'#FFFFFF',fontSize:18,textAlign:'center'},style:{height:40,width:V-80,padding:0,backgroundColor:w.default.main,borderRadius:4,marginTop:25},onPress:function(){return e.findUserWorkOrderListByType()}},"\u67e5\u8be2"),l.default.createElement(p.default,{ref:"toast",position:"center"}))}},{key:"_pressitem",value:function(e){this.findBuildProjectById(1===H.type?e.workOrderId:e.builtProjectId)}},{key:"renderRow",value:function(e,t,n,a){var i=this;return l.default.createElement(o.View,{style:Y.contentViewStyle},l.default.createElement(o.TouchableOpacity,{style:Y.itemStyleall,onPress:function(){i._pressitem(e)}},l.default.createElement(o.View,{style:Y.itemStyleall},l.default.createElement(o.View,{style:Y.itemStyle},l.default.createElement(o.Text,{style:{fontSize:14,textColor:'black',flexWrap:'wrap'}},1===H.type?e.name:e.projectName),l.default.createElement(o.Text,{style:{fontSize:13,textColor:'gray'}},(0,g.default)(e.projectDayStartTime).format('YYYY-MM-DD HH:MM'))),l.default.createElement(o.View,{style:Y.itemStyle},l.default.createElement(o.Text,{style:{fontSize:14,textColor:'black',flexWrap:'wrap'}},e.typeName),l.default.createElement(o.Text,{style:{fontSize:13,textColor:'gray'}},1===H.type?e.builtSiteAddress:e.employeeNum)),l.default.createElement(o.View,{style:Y.itemStyle},l.default.createElement(o.Text,{style:{fontSize:14,textColor:'black',flexWrap:'wrap'}},'\u8ba2\u5355\u72b6\u6001\uff1a'+(1===H.type?j.default.Getworkorderstatus(e.workOrderStatus):j.default.Getmasterorderstatus(e.buildProjectStatus))),l.default.createElement(o.Text,{style:Y.name},"\u8d39\u7528:",e.workFee)))))}}]),t})(r.Component));a.default=W;var Y=o.StyleSheet.create({container:{flexDirection:'column',flex:1,paddingTop:27,paddingBottom:5,marginBottom:5,alignItems:'center',backgroundColor:'#fff',borderBottomWidth:o.StyleSheet.hairlineWidth,borderBottomColor:'#cdcdcd'},containerlist:{flexDirection:'column',width:V,height:L/2,paddingTop:27,paddingBottom:5,marginBottom:5,alignItems:'center'},containerrender:{flexDirection:'column',width:V/2-20,alignItems:'center'},name:{fontSize:14,color:'gray'},containerbox:{paddingLeft:15,paddingRight:15,height:70,paddingBottom:8,flexDirection:'row',alignItems:'center',backgroundColor:'#fff'},searchBox:{height:40,flex:1,marginLeft:10,marginBottom:5,flexDirection:'row',backgroundColor:'#E6E7E8',borderRadius:20},searchIcon:{alignSelf:'center',marginLeft:7,marginRight:7,width:25,height:25},inputText:{alignSelf:'center',height:40,flex:1,marginLeft:5,fontSize:16,textAlignVertical:'center',textDecorationLine:'none'},contentViewStyle:{alignItems:'center',backgroundColor:'white',borderBottomWidth:1,borderBottomColor:'gray'},itemStyleall:{flexDirection:'column',justifyContent:'flex-start',backgroundColor:'white',alignItems:'center',width:V},itemStyle:{paddingRight:12,paddingLeft:15,flexDirection:'row',justifyContent:'space-between',backgroundColor:'white',alignItems:'center',width:V,height:30},rowBack:{alignItems:'center',backgroundColor:'#DDD',flexDirection:'row',justifyContent:'space-between',flex:1},leftView:{width:75,alignItems:'center',backgroundColor:'red',height:70,justifyContent:'center',borderRadius:5},roleContainer:{width:V,flexDirection:'row',paddingLeft:15,paddingRight:15,alignItems:'center',height:60,justifyContent:'space-between'},inputView:{flexDirection:'column',alignItems:'center',width:V,paddingLeft:15,paddingRight:15,justifyContent:'space-around'},textinput:{color:w.default.title,marginHorizontal:10,height:50,width:2*V/3,fontSize:13,padding:0}})},809,[13,20,37,780,568,570,578,577,567,569,776,782,779,798]);