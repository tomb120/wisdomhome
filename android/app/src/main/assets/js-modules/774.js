__d(function(e,t,n,a,i){Object.defineProperty(a,"__esModule",{value:!0});var o=t(i[0]),r=babelHelpers.interopRequireDefault(o),l=t(i[1]),s=(babelHelpers.interopRequireDefault(l),t(i[2])),u=t(i[3]),d=t(i[4]),c=(babelHelpers.interopRequireDefault(d),t(i[5])),h=babelHelpers.interopRequireDefault(c),f=t(i[6]),p=babelHelpers.interopRequireWildcard(f),m=t(i[7]),g=t(i[8]),y=babelHelpers.interopRequireDefault(g),w=t(i[9]),b=babelHelpers.interopRequireDefault(w),v=(t(i[10]),t(i[11])),C=(babelHelpers.interopRequireDefault(v),t(i[12])),x=babelHelpers.interopRequireDefault(C),E=t(i[13]),S=babelHelpers.interopRequireDefault(E),T=t(i[14]),k=(babelHelpers.interopRequireDefault(T),t(i[15])),D=babelHelpers.interopRequireDefault(k),L=t(i[16]),B=babelHelpers.interopRequireWildcard(L),R=t(i[17]),_=babelHelpers.interopRequireDefault(R),V=s.Dimensions.get('window').width,A=null,P=null,I=s.Dimensions.get('window'),H=I.width,j=I.height,M=t(i[18]),q=(function(e){function n(e){babelHelpers.classCallCheck(this,n);var a=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return a.state={textuser:'',textpass:'',count:60,resultMessage:''},a.onBackButtonPressAndroid=function(){void 0===a.state.viewAppear&&(a._stopScan(),a.setState({viewAppear:!1}))},a._onBarCodeRead=function(e){a._stopScan(),a.setState({viewAppear:!1}),a.setState({referee:e.nativeEvent.data.code})},a._startScan=function(e){a._barCode.startScan()},a._stopScan=function(e){a._barCode.stopScan()},a._onPOISearchDone=function(e){console.log('----_onPOISearchDone----:',e);try{e.searchResultList.length>0&&a.setState({dataArray:e.searchResultList,postionlist:e.searchResultList[0],builtsiteaddress:e.searchResultList[0].address})}catch(e){console.log(e)}},a._onLocationResult=function(e){console.log("_onLocationResult...result",e),a.setState({searchArray:e.searchResultList})},a._onDidMoveByUser=function(e){a.setState({longitude:e.nativeEvent.data.centerCoordinate.longitude,latitude:e.nativeEvent.data.centerCoordinate.latitude}),a._searchNearBy(e.nativeEvent.data.centerCoordinate.latitude,e.nativeEvent.data.centerCoordinate.longitude)},a.cameraAction=function(e){t(i[4]).showImagePicker({title:'\u8bf7\u9009\u62e9',cancelButtonTitle:'\u53d6\u6d88',takePhotoButtonTitle:'\u62cd\u7167',chooseFromLibraryButtonTitle:'\u9009\u62e9\u76f8\u518c',quality:.75,allowsEditing:!0,noData:!1,storageOptions:{skipBackup:!0,path:'images'}},function(t){if(console.log('Response = ',t),t.didCancel)console.log('User cancelled image picker');else if(t.error)console.log('ImagePicker Error: ',t.error);else if(t.customButton)console.log('User tapped custom button: ',t.customButton);else{t.uri;1===e?a.setState({avatarSourcemaster:t.uri}):2==e&&a.setState({avatarSourcesite:t.uri});var n=t.uri,i=[{mime:'',path:""+n}],o=n.split('.');o.length>1&&(i.mime="."+o[o.length-1],a.fileUpload(i,e))}})},a.clickGetMsgCode=function(){var e=a.data.mobile.trim();a.isEmptyPhone(e)&&(a.countDownTimer(),a.verifycode())},a.data={mobile:'',verCode:'',pwd:'',invitCode:'',isSubmiting:!1},a.state={message:"aaa",inviteCode:'',headPortraitUrl:'',name:'',type:'',registerDate:'',builtsiteaddress:'',builtSiteSpecification:'',builtSiteName:'',avatarSourcemaster:'icon_102',avatarSourcesite:'icon_102',postionlist:[],userAddress:'\u8bf7\u9009\u62e9\u5730\u70b9',longitude:110.381077,latitude:33.931822,viewAppear:!1,referee:'',loaded:!1,keywords:'\u5546\u52a1\u4f4f\u5b85|\u5b66\u6821',dataArray:[],isHidden:!0,showBtn:!0,countDownValue:D.default.CountDownTime,phoneChanged:!1},a}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer),B.removeEventListener('hardwareBackPress',this.onBackButtonPressAndroid)}},{key:"componentDidMount",value:function(){B.addEventListener('hardwareBackPress',this.onBackButtonPressAndroid),_.default.requestMultiplePermission(),this.setState({message:this.props.message,liked:!0}),s.AsyncStorage.getItem('logininfo',function(e,t){JSON.parse(t)}),s.NativeAppEventEmitter.addListener('amap.onPOISearchDone',this._onPOISearchDone),s.NativeAppEventEmitter.addListener('amap.location.onLocationResult',this._onLocationResult),this.getCurrentPosition()}},{key:"getCurrentPosition",value:function(){var e=this;M.getCurrentPosition(function(t){console.log('---location----:',t);var n={latitude:t.coords.latitude,longitude:t.coords.longitude};e._amap.setCenterCoordinate(n),e.setState({longitude:t.coords.longitude,latitude:t.coords.latitude,loaded:!0},function(){setTimeout(function(){e.setState({isHidden:!1})},200)})},function(e){alert("\u83b7\u53d6\u4f4d\u7f6e\u5931\u8d25")})}},{key:"_onstartbarcode",value:function(){this.setState({viewAppear:!0})}},{key:"_searchNearBy",value:function(e,t){var n={page:1,coordinate:{latitude:e,longitude:t},keywords:this.state.keywords};this._amap.searchPoiByCenterCoordinate(n)}},{key:"_pressButton",value:function(){this.props.navigator;this.props.navigation.navigate('Reg',{name:'Lucy'})}},{key:"register",value:function(){var e=this,t=this.data.name,n=this.data.mobile,a=this.data.verCode,i=this.data.pwd;if(null!==t&&void 0!==t&&''!==t)if(null!==n&&void 0!==n&&''!==n)if(null!==i&&void 0!==i&&''!==i)if(null!==a&&void 0!==a&&''!==a)if(null!==A&&void 0!==A&&''!==A){if(null!==P&&void 0!==P&&''!==P){var o=new FormData,r={};r.builtSiteName=this.state.builtSiteName,r.builtSiteAddress=this.state.builtsiteaddress,r.longitude=this.state.longitude,r.latitude=this.state.latitude,r.builtSiteSpecification=this.state.builtSiteSpecification,r.builtSiteStatus=0,o.append('buildSiteInfoTableStr',JSON.stringify(r)),o.append('name',this.data.name),o.append('password',this.data.pwd),o.append('phone',this.data.mobile),o.append('type',2),o.append('verifyCode',this.data.verCode),o.append('status',0),o.append('headPortraitUrl','http://image.hjninan.com/'+A);var l=[],u={};u.imagePath='http://image.hjninan.com/'+P,u.imageType=2,l.push(u),o.append('imageList',JSON.stringify(l)),o.append('status',0);var d=p.baseurl+"/user/register";return m.EasyLoading.show('\u6b63\u5728\u63d0\u4ea4...',3e3),fetch(d,{method:"POST",headers:{ContentType:'application/x-www-form-urlencoded'},body:o}).then(function(e){return e.json()}).then(function(t){m.EasyLoading.dismis(),e.setState({status:t.resultFlag,msg:t.msg},function(){this.refs.toast.show(this.state.msg,1e3),1==this.state.status&&s.NativeModules.IntentModule.startActivityFromJS("com.gyzj.gyclient.LoginActivity",'')})}).catch(function(e){m.EasyLoading.dismis(),console.log(e.message)})}this.refs.toast.show("\u5de5\u5730\u56fe\u7247\u4e0d\u80fd\u4e3a\u7a7a",1e3)}else this.refs.toast.show("\u4e2a\u4eba\u5934\u50cf\u4e0d\u80fd\u4e3a\u7a7a",1e3);else this.refs.toast.show("\u9a8c\u8bc1\u7801\u4e0d\u80fd\u4e3a\u7a7a",1e3);else this.refs.toast.show("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a",1e3);else this.refs.toast.show("\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a",1e3);else this.refs.toast.show("\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a",1e3)}},{key:"fileUpload",value:function(e,t){var n=this;try{var a=new FormData;if(!e.length)return{success:!1,message:'\u672a\u9009\u62e9\u6587\u4ef6'};for(var i=0;i<e.length;i++){var o=e[i].path,r=o.split('/'),l={uri:o,type:'application/octet-stream',name:escape(r[r.length-1])};a.append("file",l),a.append("key",escape(r[r.length-1])),a.append("token",p.uploadtoken)}console.log(a);m.EasyLoading.show('\u4e0a\u4f20\u4e2d...',3e3);fetch('https://up.qiniup.com',{method:'POST',headers:{},body:a,contentType:!1,processData:!1}).then(function(e){return e.json()}).then(function(e){m.EasyLoading.dismis(),n.refs.toast.show(e.key,1e3),1===t?A=e.key:2===t&&(P=e.key),s.AsyncStorage.setItem('picinfo',fileName)}).catch(function(e){m.EasyLoading.dismis(),console.log(e.message)})}catch(e){console.log(e)}}},{key:"msgCodeButtonView",value:function(){return this.state.showBtn?r.default.createElement(s.Text,{style:{color:S.default.main,fontSize:14}},"\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801"):r.default.createElement(s.Text,{style:{color:S.default.tint,fontSize:14}},this.state.countDownValue,"s\u540e\u91cd\u65b0\u83b7\u53d6")}},{key:"verifycode",value:function(){var e=this,t=p.baseurl+"/user/sendPhoneVerifyCode?phone="+this.data.mobile;return fetch(t,{method:"get",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({status:t.status,msg:t.msg},function(){1==this.state.status?this.refs.toast.show('\u77ed\u4fe1\u9a8c\u8bc1\u7801\u83b7\u53d6\u6210\u529f',1e3):this.refs.toast.show(this.state.msg)})}).catch(function(t){console.log(t.message),e.refs.toast.show('\u8fde\u63a5\u670d\u52a1\u5668\u8d85\u65f6',1e3)})}},{key:"countDownTimer",value:function(){var e=this;this.setState({showBtn:!1}),this.interval=setInterval(function(){var t=e.state.countDownValue-1;0===t?(e.interval&&clearInterval(e.interval),e.setState({showBtn:!0,countDownValue:D.default.CountDownTime})):e.setState({countDownValue:t})},1e3)}},{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"isEmptyPhone",value:function(e){return null==e||''==e?(this.refs.toast.show('\u8bf7\u8f93\u5165\u624b\u673a\u53f7',1e3),!1):!!_.default.isPhoneNumber(e)||(this.refs.toast.show('\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7',1e3),!1)}},{key:"render",value:function(){var e=this;return r.default.createElement(s.View,{style:{flex:1}},this.state.viewAppear?r.default.createElement(x.default,{style:{flex:1},ref:function(t){return e._barCode=t},onBarCodeRead:this._onBarCodeRead}):r.default.createElement(s.ScrollView,{scrollsToTop:!1,style:O.menu},r.default.createElement(s.View,{style:O.classsetcontainer},r.default.createElement(s.View,{style:[O.classContainer,{paddingLeft:30,justifyContent:'space-between'}]},r.default.createElement(s.Text,{style:[O.text]},"\u6ce8\u518c\u5e10\u6237"),r.default.createElement(s.Text,{style:[O.text,{color:S.default.main}]},"\u5df2\u6709\u5e10\u6237\u767b\u5f55")),r.default.createElement(s.View,{style:O.inputView},r.default.createElement(s.Text,{style:O.text},"\u7528\u6237\u540d"),r.default.createElement(s.TextInput,{style:O.textinput,maxLength:11,clearButtonMode:"while-editing",returnKeyType:"done",underlineColorAndroid:"transparent",placeholderTextColor:S.default.subtitle,placeholder:"\u8bf7\u8bbe\u7f6e\u7528\u6237\u540d",onChangeText:function(t){e.data.name=t}})),r.default.createElement(s.View,{style:O.inputView},r.default.createElement(s.Text,{style:O.text},"\u624b\u673a\u53f7"),r.default.createElement(s.TextInput,{style:O.textinput,maxLength:11,keyboardType:"numeric",clearButtonMode:"while-editing",returnKeyType:"done",underlineColorAndroid:"transparent",placeholderTextColor:S.default.subtitle,placeholder:"\u53ef\u7528\u4e8e\u767b\u5f55\u548c\u627e\u56de\u5bc6\u7801",onChangeText:function(t){e.data.mobile=t}})),r.default.createElement(s.View,{style:O.inputView},r.default.createElement(s.Text,{style:O.text},"\u5bc6\u7801"),r.default.createElement(s.TextInput,{style:O.textinput,clearButtonMode:"while-editing",returnKeyType:"done",maxLength:16,underlineColorAndroid:"transparent",secureTextEntry:!0,placeholderTextColor:S.default.subtitle,placeholder:"\u8bbe\u7f6e\u767b\u5f55\u5bc6\u7801\uff086-16\u4f4d\uff09",onChangeText:function(t){e.data.pwd=t}})),r.default.createElement(s.View,{style:O.inputView},r.default.createElement(s.Text,{style:O.text},"\u77ed\u4fe1\u9a8c\u8bc1\u7801"),r.default.createElement(s.View,{style:O.arrowContainer},r.default.createElement(s.TextInput,{ref:"msgCode",style:[O.textinput,{width:90}],clearButtonMode:"while-editing",returnKeyType:"done",keyboardType:"numeric",underlineColorAndroid:"transparent",placeholderTextColor:S.default.subtitle,placeholder:"\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801",onChangeText:function(t){e.data.verCode=t}}),r.default.createElement(s.TouchableHighlight,{onPress:this.clickGetMsgCode,activeOpacity:1,underlayColor:S.default.transparentColor,style:{flexDirection:'row',marginRight:10,borderRadius:5}},r.default.createElement(s.View,{style:{backgroundColor:1==this.state.showBtn?S.default.background:S.default.inactiveRemind,justifyContent:'center',alignItems:'center',width:110,height:40,borderWidth:1,borderColor:S.default.main,borderRadius:5}},r.default.createElement(s.View,null,this.msgCodeButtonView()))))),r.default.createElement(s.View,{style:O.inputView},r.default.createElement(s.Text,{style:O.text},"\u5de5\u5730\u540d\u79f0"),r.default.createElement(s.TextInput,{style:O.textinput,maxLength:11,clearButtonMode:"while-editing",returnKeyType:"done",underlineColorAndroid:"transparent",placeholderTextColor:S.default.subtitle,placeholder:"",onChangeText:function(t){e.state.builtSiteName=t}})),r.default.createElement(s.View,{style:O.exercisemap},r.default.createElement(s.View,{style:O.classContainer},r.default.createElement(s.View,{style:O.smsmessage},r.default.createElement(s.Text,{style:O.name},"\u5e38\u7528\u5de5\u5730"),r.default.createElement(s.Image,{style:O.arrow,source:{uri:'icon_104'}})),r.default.createElement(s.Text,{style:O.name},this.state.builtsiteaddress)),r.default.createElement(s.View,{style:{flexDirection:'column',height:120}},r.default.createElement(b.default,{ref:function(t){return e._amap=t},style:{width:H,height:j/4,marginTop:5},options:{frame:{width:H,height:j/3},showsUserLocation:!0,userTrackingMode:null,centerCoordinate:{latitude:this.state.latitude,longitude:this.state.longitude},zoomLevel:18.1,centerMarker:'icon_104'},onLayout:this._onLayout,onDidMoveByUser:this._onDidMoveByUser})),r.default.createElement(u.Divider,null)),r.default.createElement(s.Text,{style:O.text},"\u5de5\u5730\u63cf\u8ff0"),r.default.createElement(s.View,{style:O.divContainer},r.default.createElement(s.TextInput,{style:[O.textinput,{height:150}],maxLength:120,multiline:!0,clearButtonMode:"while-editing",returnKeyType:"done",underlineColorAndroid:"transparent",placeholderTextColor:S.default.subtitle,placeholder:"",onChangeText:function(t){e.state.builtSiteSpecification=t}})),r.default.createElement(s.View,{style:O.divContainer},r.default.createElement(s.TouchableOpacity,{onPress:function(){return e.cameraAction(1)}},r.default.createElement(s.Text,{style:O.name},"\u4e2a\u4eba\u5934\u50cf"),r.default.createElement(s.Image,{style:{marginTop:10,width:V-50,height:260},source:{uri:this.state.avatarSourcemaster}}))),r.default.createElement(s.View,{style:O.divContainer},r.default.createElement(s.TouchableOpacity,{onPress:function(){return e.cameraAction(2)}},r.default.createElement(s.Text,{style:O.name},"\u5de5\u5730\u56fe\u7247"),r.default.createElement(s.Image,{style:{marginTop:10,width:V-50,height:260},source:{uri:this.state.avatarSourcesite}}))),r.default.createElement(h.default,{underlayColor:"blue",underlayTxtColor:"gray",txtStyle:{color:'white',fontSize:15,textAlign:'left'},style:O.btnc,onPress:function(){return e.register()}},"\u6ce8\u518c")),r.default.createElement(m.Loading,null),r.default.createElement(y.default,{ref:"toast",position:"bottom"})))}}]),n})(o.Component);a.default=q;var O=s.StyleSheet.create({menu:{flex:1,backgroundColor:'white'},classsetcontainer:{flexDirection:'column',justifyContent:'space-around',alignItems:'center',backgroundColor:'#F5FCFF',width:H,marginBottom:15},smsmessage:{flexDirection:'row',justifyContent:'flex-start',alignItems:'center'},classContainer:{paddingLeft:15,paddingRight:15,flexDirection:'row',width:V,alignItems:'center',borderBottomWidth:.5,borderBottomColor:S.default.gray,height:40,justifyContent:'space-around'},classlogo:{marginLeft:5,fontSize:16,color:'gray'},arrowContainer:{flexDirection:'row',justifyContent:'flex-start',alignItems:'center',height:45},arrow:{height:30,width:30},divContainer:{flexDirection:'column',justifyContent:'flex-start',backgroundColor:'#FFFFFF',alignItems:'center',marginTop:10,height:250,width:H-40,borderWidth:.5,borderColor:S.default.gray,borderRadius:5},btnc:{marginTop:20,height:40,width:.6666666666666666*H,padding:0,backgroundColor:'skyblue',borderRadius:6},cominputText:{height:50,marginLeft:5,width:200,marginRight:5,fontSize:14,textAlignVertical:'center',textDecorationLine:'none'},exercisemap:{flex:1,flexDirection:'column',justifyContent:'flex-start',backgroundColor:'#fff',paddingLeft:15,paddingRight:15},name:{fontSize:15,textAlign:'center'},inputText:{height:50,fontSize:16,textAlignVertical:'center',textDecorationLine:'none'},containerbox:{marginLeft:15,flexDirection:'row',justifyContent:'space-around',backgroundColor:'#fff'},roleContainer:{flexDirection:'row',paddingLeft:15,paddingRight:15,width:V,alignItems:'center',height:40,justifyContent:'space-around'},itemstyle:{flexDirection:'row',paddingLeft:15,paddingRight:15,alignItems:'center',height:25,justifyContent:'space-around'},dropdown:{fontSize:15,color:'gray'},text:{color:S.default.title,fontSize:14},inputView:{flexDirection:'row',borderBottomWidth:.5,alignItems:'center',width:H,paddingLeft:50,paddingRight:15,justifyContent:'space-around',borderColor:S.default.gray},textinput:{color:S.default.subtitle,marginHorizontal:10,height:50,width:H/2,fontSize:13,padding:0}})},774,[13,18,20,308,566,567,568,569,570,571,111,574,576,577,578,579,286,580,92]);